"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6524,8794],{68763:function(t,e,n){n.d(e,{Mx:function(){return C},LR:function(){return j},iy:function(){return f}});var r=n(42122),a=n.n(r),s=n(62435),o=n(64183),c=n(54442),i=n(32983),u=n(86074),l=function(){var t=(0,c.useSelector)((function(t){return t.dash.txHistoryDataSource})),e={data:t,xField:"date",xAxis:{type:"time",mask:"MM-DD"},yField:"number",yAxis:{type:"pow",label:{formatter:function(t){return"".concat(t).replace(/\d{1,3}(?=(\d{3})+$)/g,(function(t){return"".concat(t,",")}))}}},slider:{start:0,end:1},smooth:!0,label:{}};return(0,u.jsx)(u.Fragment,{children:t.length?(0,u.jsx)(o.Z,a()({},e)):(0,u.jsx)(i.Z,{image:i.Z.PRESENTED_IMAGE_SIMPLE})})},f=(0,s.memo)(l),p=n(17061),d=n.n(p),h=n(17156),g=n.n(h),v=n(27424),m=n.n(v),x=n(64119),S=n(9004),y=n(27484),b=n.n(y),k=function(){var t=(0,s.useState)(!1),e=m()(t,2),n=e[0],r=e[1],l=(0,c.useDispatch)(),f=(0,c.useSelector)((function(t){return t.dash.tvlHistoryDataSource})),p=(0,c.useSelector)((function(t){return t.chainList.chainSelect})),h={data:f,xField:"date",xAxis:{type:"time",mask:"MM-DD"},yField:"tvl",yAxis:{type:"pow",label:{formatter:function(t){var e=Number(t);return e>1e3?"".concat(e/1e3," M"):e>1e6?"".concat(e/1e6," B"):"".concat(e," K")}}},slider:{start:0,end:1},smooth:!0,label:{}},v=(0,s.useCallback)(g()(d()().mark((function t(){var e,n,a;return d()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=function(){return r(!1)},r(!0),n=[],a="",t.t0=p.chainIdDec,t.next="17777"===t.t0?7:"40"===t.t0?9:"324"===t.t0?10:"23448594291968336"===t.t0?11:12;break;case 7:return a="https://api.llama.fi/v2/historicalChainTvl/eos%20evm",t.abrupt("break",12);case 9:a="https://api.llama.fi/v2/historicalChainTvl/telos";case 10:a="https://api.llama.fi/v2/historicalChainTvl/zkSync%20Era";case 11:a="https://api.llama.fi/v2/historicalChainTvl/Starknet";case 12:return t.next=14,(0,x.Hj)((0,c.request)(a),e);case 14:t.sent.forEach((function(t){n.push({date:b().unix(t.date).format().substring(0,10),tvl:Number((t.tvl/1e3).toFixed(0)),category:"Daily TVL"})})),l(S.N.setTvlHistoryDataSource(n)),localStorage.setItem("tvlHistoryData",JSON.stringify(n)),r(!1);case 19:case"end":return t.stop()}}),t)}))),[l,p]);return(0,s.useEffect)((function(){v()}),[v]),(0,u.jsx)(u.Fragment,{children:f.length?(0,u.jsx)(o.Z,a()(a()({},h),{},{loading:n})):(0,u.jsx)(i.Z,{image:i.Z.PRESENTED_IMAGE_SIMPLE})})},j=(0,s.memo)(k),w=n(97936),E=n(20701),D=n(11924),Z=n(79360),_=n(24770),M=n(79642),N=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]])}return n},O=(0,s.forwardRef)((function(t,e){var n=t.chartRef,r=t.style,a=void 0===r?{height:"inherit"}:r,o=t.className,c=t.loading,i=t.loadingTemplate,u=t.errorTemplate,l=N(t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),f=(0,D.Z)(E.by,l),p=f.chart,d=f.container;return(0,s.useEffect)((function(){(0,Z.J)(n,p.current)}),[p.current]),(0,s.useImperativeHandle)(e,(function(){return{getChart:function(){return p.current}}})),s.createElement(_.Z,{errorTemplate:u},c&&s.createElement(M.Z,{loadingTemplate:i,theme:t.theme}),s.createElement("div",{className:o,style:a,ref:d}))})),T=n(76509),I=function(){var t=(0,c.useDispatch)(),e=(0,c.useSelector)((function(t){return t.dash.tvlDistributionDataSource})),n=(0,s.useState)(!1),r=m()(n,2),o=r[0],l=r[1],f=(0,c.useSelector)((function(t){return t.chainList.chainSelect})),p={data:e,angleField:"value",colorField:"type",radius:.9,legend:void 0,label:{content:"{name} {percentage}"},width:210,height:210},h={data:e,angleField:"value",colorField:"type",radius:.9,legend:void 0,label:{content:"{name} {percentage}"},width:350,height:350},v=(0,s.useCallback)((function(t){switch(t){case"Noah Swap":return"Noash";case"Neutroswap":return"Neutro";case"Frogge.Finance":return"Frogge";case"EOSWAP Finance":return"EOSWAP";case"YieldHub Finance":return"YieldHub";default:return t}}),[]),y=(0,s.useCallback)(g()(d()().mark((function e(){var n,r,s,o,i,u;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return l(!1)},l(!0),r=0,s=[],e.next=6,(0,x.Hj)((0,c.request)("https://api.llama.fi/protocols"),n);case 6:o=e.sent,i="",e.t0=f.chainIdDec,e.next="17777"===e.t0?11:"40"===e.t0?13:"324"===e.t0?14:"23448594291968336"===e.t0?15:16;break;case 11:return i="EOS EVM",e.abrupt("break",16);case 13:i="Telos";case 14:i="zkSync Era";case 15:i="Starknet";case 16:(o=(o=o.filter((function(t){return t.chain===i}))).map((function(t){return r+=t.tvl,a()(a()({},t),{},{key:t.id})}))).forEach((function(t){var e=v(t.name);s.push({type:e,value:t.tvl/r})})),u=b()().valueOf(),t(w.N.setDexDataSource(o)),t(w.N.setDexDataTime(u)),t(S.N.setTvlDistributionDataSource(s)),localStorage.setItem("dexData",JSON.stringify({dexDataSource:o,dexDataTime:u})),localStorage.setItem("tvlDistributionData",JSON.stringify(s)),l(!1);case 26:case"end":return e.stop()}}),e)}))),[t,v,f]);return(0,s.useEffect)((function(){y()}),[y]),(0,u.jsx)(T.X.Consumer,{children:function(t){var n=t.isMobile;return e.length?n?(0,u.jsx)(O,a()({loading:o},p)):(0,u.jsx)(O,a()({loading:o},h)):(0,u.jsx)(i.Z,{image:i.Z.PRESENTED_IMAGE_SIMPLE})}})},C=(0,s.memo)(I)},85971:function(t,e,n){var r=(0,n(54442).getDvaApp)()._store;e.Z=r},90137:function(t,e,n){n.r(e);var r=n(17061),a=n.n(r),s=n(17156),o=n.n(s),c=n(27424),i=n.n(c),u=(n(57082),n(87659)),l=n(6466),f=n(95689),p=n(62435),d=n(71230),h=n(15746),g=n(64119),v=n(9004),m=n(54442),x=n(68763),S=n(86074);e.default=function(){var t=(0,p.useState)(!1),e=i()(t,2),n=e[0],r=e[1],s=(0,m.useDispatch)(),c=(0,m.useSelector)((function(t){return t.dash.chainData})),y=(0,m.useSelector)((function(t){return t.dash.tvlHistoryDataSource})),b=(0,m.useSelector)((function(t){return t.chainList.chainSelect})),k=(0,m.useIntl)(),j=k.formatMessage({id:"dash.totalTransactions"}),w=k.formatMessage({id:"dash.totalClasses"}),E=k.formatMessage({id:"dash.totalMessages"}),D=k.formatMessage({id:"dash.totalEvents"}),Z=k.formatMessage({id:"dash.totalBlocks"}),_=k.formatMessage({id:"dash.totalContracts"}),M=k.formatMessage({id:"dash.second"}),N=k.formatMessage({id:"dash.totalValueLocked"}),O=k.formatMessage({id:"dash.change"}),T=k.formatMessage({id:"dash.TvlDistribution"}),I=(0,p.useCallback)(function(){var t=o()(a()().mark((function t(e){var n,r,s,o,c,i;return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.total_count_transactions,r=e.total_count_blocks,s=e.total_count_contracts,o=e.total_count_events,c=e.total_count_messages,i=e.total_count_classes,t.abrupt("return",{totalTransactions:n,totalBlocks:r,totalContracts:s,totalEvents:o,totalMessages:c,totalClasses:i});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[M]),C=(0,p.useCallback)(o()(a()().mark((function t(){var e,n,o,c;return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(){return r(!1)},r(!0),n={query:"query HomePageStatsSummaryStarknetOverViewStatsQuery {\n  starknetOverviewStats {\n    ...useHomePageStatsInfoFragment_starknetOverviewStats\n  }\n}\n\nfragment useHomePageStatsInfoFragment_starknetOverviewStats on StarknetOverviewStats {\n  total_count_blocks\n  total_count_transactions\n  total_count_events\n  total_count_messages\n  total_count_contracts\n  total_count_classes\n}\n",variables:{}},t.next=5,(0,g.Hj)((0,m.request)(b.blockExplorerUrls[1],{method:"POST",data:n}),e);case 5:return o=t.sent,t.next=8,I(o.data.starknetOverviewStats);case 8:c=t.sent,s(v.N.setChainData(c)),localStorage.setItem("chainData",JSON.stringify(c)),r(!1);case 12:case"end":return t.stop()}}),t)}))),[s,I,b]),P=(0,p.useMemo)((function(){if(!y.length)return 0;var t=y.length-1;return 1e3*y[t].tvl}),[y]),F=(0,p.useMemo)((function(){if(!y.length)return 0;var t=y.length-1,e=y.length-2,n=y[t].tvl,r=y[e].tvl;return(n-r)/r*100}),[y]);return(0,p.useEffect)((function(){C()}),[C]),(0,S.jsxs)(u._z,{className:"dash",ghost:!0,children:[(0,S.jsxs)(d.Z,{gutter:8,children:[(0,S.jsx)(h.Z,{span:"8",children:(0,S.jsx)(l.Z,{loading:n,title:Z,statistic:{value:c.totalBlocks}})}),(0,S.jsx)(h.Z,{span:"8",children:(0,S.jsx)(l.Z,{loading:n,title:j,statistic:{value:c.totalTransactions}})}),(0,S.jsx)(h.Z,{span:"8",children:(0,S.jsx)(l.Z,{loading:n,title:_,statistic:{value:c.totalContracts}})}),(0,S.jsx)(h.Z,{span:"8",children:(0,S.jsx)(l.Z,{loading:n,title:D,statistic:{value:c.totalEvents}})}),(0,S.jsx)(h.Z,{span:"8",children:(0,S.jsx)(l.Z,{loading:n,title:E,statistic:{value:c.totalMessages}})}),(0,S.jsx)(h.Z,{span:"8",children:(0,S.jsx)(l.Z,{loading:n,title:w,statistic:{value:c.totalClasses}})})]}),!0===b.testNet?(0,S.jsx)(S.Fragment,{}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(l.Z,{bodyStyle:{paddingBlock:"8px",paddingInline:"12px"},headStyle:{paddingBlock:"8px",paddingInline:"12px"},title:"".concat(N," (USD)"),chart:(0,S.jsx)(x.LR,{}),footer:(0,S.jsxs)("div",{className:"flex justify-around",children:[(0,S.jsx)(f.Z,{prefix:"$",value:P,title:N,layout:"vertical"}),(0,S.jsx)(f.Z,{value:F,title:"".concat(O,"(24h)"),layout:"vertical",suffix:"%",precision:2})]})}),(0,S.jsx)(l.Z,{bodyStyle:{paddingBlock:"8px",paddingInline:"12px"},headStyle:{paddingBlock:"8px",paddingInline:"12px"},title:T,chart:(0,S.jsx)(x.Mx,{})})]})]})}},64119:function(t,e,n){n.d(e,{CE:function(){return v},D0:function(){return S},Hj:function(){return j},IU:function(){return b},Mn:function(){return E},pM:function(){return _},su:function(){return D},zI:function(){return m}});var r=n(27424),a=n.n(r),s=n(17061),o=n.n(s),c=n(18698),i=n.n(c),u=n(17156),l=n.n(u),f=n(85971),p=n(2453),d=n(9669),h=n.n(d);function g(){return f.Z.getState().global.nodeConfig.url}function v(t,e){var n=e||"",r=t,a=Number(r)<1;if("number"==typeof r&&(r=r.toString()),a){var s=/0\.(0{4,})/,o=/\d+\.0*\d{3}/.exec(r);if(r=o?o[0]:r,o=s.exec(r)){var c=o[1].length;return n+r.replace(s,"0.0{"+c+"}")}return n+r}return n+Number(r).toLocaleString()}function m(t){return x.apply(this,arguments)}function x(){return(x=l()(o()().mark((function t(e){var n;return o()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e;case 3:return n=t.sent,t.abrupt("return",[null,n]);case 7:if(t.prev=7,t.t0=t.catch(0),!(t.t0 instanceof Error)){t.next=14;break}return console.log(t.t0),t.abrupt("return",[t.t0.message,null]);case 14:if(console.log(t.t0),"object"!==i()(t.t0)){t.next=19;break}return t.abrupt("return",[JSON.stringify(t.t0),null]);case 19:return t.abrupt("return",[t.t0,null]);case 20:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function S(t){return y.apply(this,arguments)}function y(){return(y=l()(o()().mark((function t(e){var n;return o()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=g(),t.next=3,m(h().post("".concat(n,"/v1/chain/get_account"),JSON.stringify(e)));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(t,e){return k.apply(this,arguments)}function k(){return(k=l()(o()().mark((function t(e,n){var r;return o()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e;case 3:return r=t.sent,t.abrupt("return",r);case 7:if(t.prev=7,t.t0=t.catch(0),!(t.t0 instanceof Error)){t.next=15;break}throw console.log(t.t0),p.ZP.error({content:n||t.t0.message,duration:5}),t.t0;case 15:throw console.log(t.t0),"object"===i()(t.t0)?p.ZP.error({content:n||JSON.stringify(t.t0),duration:5}):p.ZP.error({content:n||t.t0,duration:5}),t.t0;case 18:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function j(t,e,n){return w.apply(this,arguments)}function w(){return(w=l()(o()().mark((function t(e,n,r){var a,s,c;return o()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=null!=n?n:function(){},t.prev=1,t.next=4,e;case 4:return s=t.sent,t.abrupt("return",s);case 8:if(t.prev=8,t.t0=t.catch(1),!(t.t0 instanceof Error)){t.next=17;break}throw console.log(t.t0),a(),p.ZP.error({content:r||t.t0.message,duration:5}),t.t0;case 17:throw console.log(t.t0),"object"===i()(t.t0)?(c="",c=t.t0.hasOwnProperty("message")?t.t0.message:JSON.stringify(t.t0),p.ZP.error({content:r||c,duration:5})):p.ZP.error({content:r||t.t0,duration:5}),a(),t.t0;case 21:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}function E(){var t=navigator.userAgent;return/mobile/i.test(t)}function D(t){return Z.apply(this,arguments)}function Z(){return(Z=l()(o()().mark((function t(e){var n,r,s,c;return o()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null,r=null,t.next=3,m(h().get("".concat(e,"/v1/chain/get_info"),{timeout:1e4}));case 3:return s=t.sent,c=a()(s,2),n=c[0],r=c[1],t.abrupt("return",[n,r]);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(t){if("string"==typeof t)try{var e=JSON.parse(t);return!("object"!==i()(e)||!e)}catch(t){return!1}}},57082:function(){}}]);