"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7220],{68763:function(e,t,a){a.d(t,{Mx:function(){return C},LR:function(){return D},iy:function(){return d}});var r=a(42122),n=a.n(r),i=a(62435),c=a(64183),s=a(54442),l=a(32983),u=a(86074),o=function(){var e=(0,s.useSelector)((function(e){return e.dash.txHistoryDataSource})),t={data:e,xField:"date",xAxis:{type:"time",mask:"MM-DD"},yField:"number",yAxis:{type:"pow",label:{formatter:function(e){return"".concat(e).replace(/\d{1,3}(?=(\d{3})+$)/g,(function(e){return"".concat(e,",")}))}}},slider:{start:0,end:1},smooth:!0,label:{}};return(0,u.jsx)(u.Fragment,{children:e.length?(0,u.jsx)(c.Z,n()({},t)):(0,u.jsx)(l.Z,{image:l.Z.PRESENTED_IMAGE_SIMPLE})})},d=(0,i.memo)(o),f=a(17061),h=a.n(f),p=a(17156),m=a.n(p),g=a(27424),v=a.n(g),b=a(64119),x=a(9004),y=a(27484),S=a.n(y),k=function(){var e=(0,i.useState)(!1),t=v()(e,2),a=t[0],r=t[1],o=(0,s.useDispatch)(),d=(0,s.useSelector)((function(e){return e.dash.tvlHistoryDataSource})),f=(0,s.useSelector)((function(e){return e.chainList.chainSelect})),p={data:d,xField:"date",xAxis:{type:"time",mask:"MM-DD"},yField:"tvl",yAxis:{type:"pow",label:{formatter:function(e){var t=Number(e);return t>1e3?"".concat(t/1e3," M"):t>1e6?"".concat(t/1e6," B"):"".concat(t," K")}}},slider:{start:0,end:1},smooth:!0,label:{}},g=(0,i.useCallback)(m()(h()().mark((function e(){var t,a,n;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){return r(!1)},r(!0),a=[],n="",e.t0=f.chainIdDec,e.next="17777"===e.t0?7:"40"===e.t0?9:"324"===e.t0?11:"23448594291968336"===e.t0?13:"59144"===e.t0?15:"8453"===e.t0?17:19;break;case 7:return n="https://api.llama.fi/v2/historicalChainTvl/eos%20evm",e.abrupt("break",19);case 9:return n="https://api.llama.fi/v2/historicalChainTvl/telos",e.abrupt("break",19);case 11:return n="https://api.llama.fi/v2/historicalChainTvl/zkSync%20Era",e.abrupt("break",19);case 13:return n="https://api.llama.fi/v2/historicalChainTvl/Starknet",e.abrupt("break",19);case 15:return n="https://api.llama.fi/v2/historicalChainTvl/Linea",e.abrupt("break",19);case 17:return n="https://api.llama.fi/v2/historicalChainTvl/Base",e.abrupt("break",19);case 19:return e.next=21,(0,b.Hj)((0,s.request)(n),t);case 21:e.sent.forEach((function(e){a.push({date:S().unix(e.date).format().substring(0,10),tvl:Number((e.tvl/1e3).toFixed(0)),category:"Daily TVL"})})),o(x.N.setTvlHistoryDataSource(a)),localStorage.setItem("tvlHistoryData",JSON.stringify(a)),r(!1);case 26:case"end":return e.stop()}}),e)}))),[o,f]);return(0,i.useEffect)((function(){g()}),[g]),(0,u.jsx)(u.Fragment,{children:d.length?(0,u.jsx)(c.Z,n()(n()({},p),{},{loading:a})):(0,u.jsx)(l.Z,{image:l.Z.PRESENTED_IMAGE_SIMPLE})})},D=(0,i.memo)(k),E=a(52847),j=a(20701),N=a(11924),T=a(79360),M=a(24770),F=a(79642),I=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a},w=(0,i.forwardRef)((function(e,t){var a=e.chartRef,r=e.style,n=void 0===r?{height:"inherit"}:r,c=e.className,s=e.loading,l=e.loadingTemplate,u=e.errorTemplate,o=I(e,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),d=(0,N.Z)(j.by,o),f=d.chart,h=d.container;return(0,i.useEffect)((function(){(0,T.J)(a,f.current)}),[f.current]),(0,i.useImperativeHandle)(t,(function(){return{getChart:function(){return f.current}}})),i.createElement(M.Z,{errorTemplate:u},s&&i.createElement(F.Z,{loadingTemplate:l,theme:e.theme}),i.createElement("div",{className:c,style:n,ref:h}))})),O=a(76509),Z=function(){var e=(0,s.useDispatch)(),t=(0,s.useSelector)((function(e){return e.dash.tvlDistributionDataSource})),a=(0,i.useState)(!1),r=v()(a,2),c=r[0],o=r[1],d=(0,s.useSelector)((function(e){return e.chainList.chainSelect})),f={data:t,angleField:"value",colorField:"type",radius:.9,legend:void 0,label:{content:"{name} {percentage}"},width:210,height:210},p={data:t,angleField:"value",colorField:"type",radius:.9,legend:void 0,label:{content:"{name} {percentage}"},width:350,height:350},g=(0,i.useCallback)((function(e){switch(e){case"Noah Swap":return"Noash";case"Neutroswap":return"Neutro";case"Frogge.Finance":return"Frogge";case"EOSWAP Finance":return"EOSWAP";case"YieldHub Finance":return"YieldHub";default:return e}}),[]),y=(0,i.useCallback)(m()(h()().mark((function t(){var a,r,i,c,l,u;return h()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=function(){return o(!1)},o(!0),r=0,i=[],t.next=6,(0,b.Hj)((0,s.request)("https://api.llama.fi/protocols"),a);case 6:c=t.sent,l="",t.t0=d.chainIdDec,t.next="17777"===t.t0?11:"40"===t.t0?13:"324"===t.t0?15:"23448594291968336"===t.t0?17:"59144"===t.t0?19:"8453"===t.t0?21:23;break;case 11:return l="EOS EVM",t.abrupt("break",23);case 13:return l="Telos",t.abrupt("break",23);case 15:return l="zkSync Era",t.abrupt("break",23);case 17:return l="Starknet",t.abrupt("break",23);case 19:return l="Linea",t.abrupt("break",23);case 21:return l="Base",t.abrupt("break",23);case 23:(c=(c="Base"===l?c.filter((function(e){return e.chains.includes(l)})):c.filter((function(e){return e.chain===l}))).map((function(e){return r+=e.tvl,n()(n()({},e),{},{key:e.id})}))).forEach((function(e){var t=g(e.name);i.push({type:t,value:e.tvl/r})})),u=S()().valueOf(),e(E.N.setDexDataSource(c)),e(E.N.setDexDataTime(u)),e(x.N.setTvlDistributionDataSource(i)),localStorage.setItem("dexData",JSON.stringify({dexDataSource:c,dexDataTime:u})),localStorage.setItem("tvlDistributionData",JSON.stringify(i)),o(!1);case 33:case"end":return t.stop()}}),t)}))),[e,g,d]);return(0,i.useEffect)((function(){y()}),[y]),(0,u.jsx)(O.X.Consumer,{children:function(e){var a=e.isMobile;return t.length?a?(0,u.jsx)(w,n()({loading:c},f)):(0,u.jsx)(w,n()({loading:c},p)):(0,u.jsx)(l.Z,{image:l.Z.PRESENTED_IMAGE_SIMPLE})}})},C=(0,i.memo)(Z)},78722:function(e,t,a){a.r(t);var r=a(41718),n=(a(57082),a(87659)),i=a(6466),c=a(95689),s=a(68763),l=a(54442),u=a(62435),o=a(86074);t.default=function(){var e=(0,l.useSelector)((function(e){return e.dash.tvlHistoryDataSource})),t=(0,l.useSelector)((function(e){return e.chainList.chainSelect})),a=(0,l.useIntl)(),d=a.formatMessage({id:"dash.totalValueLocked"}),f=a.formatMessage({id:"dash.change"}),h=a.formatMessage({id:"dash.TvlDistribution"}),p=(0,u.useMemo)((function(){if(!e.length)return 0;var t=e.length-1;return 1e3*e[t].tvl}),[e]),m=(0,u.useMemo)((function(){if(!e.length)return 0;var t=e.length-1,a=e.length-2,r=e[t].tvl,n=e[a].tvl;return(r-n)/n*100}),[e]);return(0,o.jsxs)(n._z,{className:"dash",ghost:!0,children:[(0,o.jsx)(r.L6,{}),!0===t.testNet?(0,o.jsx)(o.Fragment,{}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.Z,{bodyStyle:{paddingBlock:"8px",paddingInline:"12px"},headStyle:{paddingBlock:"8px",paddingInline:"12px"},title:"".concat(d," (USD)"),chart:(0,o.jsx)(s.LR,{}),footer:(0,o.jsxs)("div",{className:"flex justify-around",children:[(0,o.jsx)(c.Z,{prefix:"$",value:p,title:d,layout:"vertical"}),(0,o.jsx)(c.Z,{value:m,title:"".concat(f,"(24h)"),layout:"vertical",suffix:"%",precision:2})]})}),(0,o.jsx)(i.Z,{bodyStyle:{paddingBlock:"8px",paddingInline:"12px"},headStyle:{paddingBlock:"8px",paddingInline:"12px"},title:h,chart:(0,o.jsx)(s.Mx,{})})]})]})}},57082:function(){}}]);