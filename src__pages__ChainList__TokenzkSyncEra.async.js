"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3165],{92003:function(e){e.exports=function({mustBeMetaMask:e=!1,silent:t=!1,timeout:n=3e3}={}){!function(){if("boolean"!=typeof e)throw new Error("@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.");if("boolean"!=typeof t)throw new Error("@metamask/detect-provider: Expected option 'silent' to be a boolean.");if("number"!=typeof n)throw new Error("@metamask/detect-provider: Expected option 'timeout' to be a number.")}();let r=!1;return new Promise((a=>{function s(){if(r)return;r=!0,window.removeEventListener("ethereum#initialized",s);const{ethereum:n}=window;if(!n||e&&!n.isMetaMask){const r=e&&n?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum.";!t&&console.error("@metamask/detect-provider:",r),a(null)}else a(n)}window.ethereum?s():(window.addEventListener("ethereum#initialized",s,{once:!0}),setTimeout((()=>{s()}),n))}))}},85971:function(e,t,n){var r=(0,n(54442).getDvaApp)()._store;t.Z=r},34103:function(e,t,n){n.r(t);var r=n(17061),a=n.n(r),s=n(17156),o=n.n(s),i=n(27424),c=n.n(i),u=n(85725),l=n(64119),d=n(87659),f=n(95750),p=n(92003),m=n.n(p),h=n(54442),g=n(2453),w=n(98293),b=n(71577),k=n(56371),x=n(62435),v=(n(55420),n(86074));t.default=function(){var e=(0,h.useSelector)((function(e){return e.chainList.tokenList})),t=(0,h.useSelector)((function(e){return e.ecosystem.tokenDataSourcezkSyncEra})),n=(0,h.useSelector)((function(e){return e.chainList.chainSelect})),r=g.ZP.useMessage(),s=c()(r,2),i=s[0],p=s[1],y=(0,x.useState)(-1),M=c()(y,2),S=M[0],L=M[1],E=(0,x.useState)(!1),N=c()(E,2),j=N[0],C=N[1],V=(0,h.useDispatch)(),A=(0,h.useSelector)((function(e){return e.chainList.address})),I=(0,h.useSelector)((function(e){return e.chainList.connected})),Z=(0,h.useIntl)(),P=Z.formatMessage({id:"chainList.Name"}),z=Z.formatMessage({id:"chainList.Contract"}),D=Z.formatMessage({id:"chainList.AddToMetaMask"}),O=Z.formatMessage({id:"chainList.ConnectWallet"}),_=Z.formatMessage({id:"chainList.Action"}),J=Z.formatMessage({id:"chainList.MultipleWallets"}),U=Z.formatMessage({id:"chainList.InstallMetaMask"}),q=Z.formatMessage({id:"chainList.AddFail"}),H=Z.formatMessage({id:"chainList.AddCompleted"}),T=(0,x.useCallback)(function(){var e=o()(a()().mark((function e(t){var n,r,s,o;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return L(-1)},L(t),e.next=4,m()();case 4:if(!(r=e.sent)||!window.ethereum){e.next=18;break}if(r===window.ethereum){e.next=10;break}i.error("".concat(J),5),e.next=16;break;case 10:return e.next=12,(0,l.Hj)(window.ethereum.request({method:"eth_requestAccounts"}),n);case 12:s=e.sent,o=s&&s.length>0?(0,k.getAddress)(s[0]):null,V(u.N.setAddress(o)),V(u.N.setConnected(!0));case 16:e.next=19;break;case 18:i.error("".concat(U),5);case 19:L(-1);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[V]),B=(0,x.useCallback)(function(){var e=o()(a()().mark((function e(t,n){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(){return L(-1)},L(t),!window.ethereum){e.next=9;break}return e.next=5,(0,l.Hj)(window.ethereum.request({method:"wallet_watchAsset",params:n.params}),r);case 5:e.sent?i.success("".concat(H)):i.error("".concat(q)),e.next=10;break;case 9:i.error("".concat(U),5);case 10:L(-1);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[A]),W=(0,x.useMemo)((function(){return[{title:"#",dataIndex:"logo",key:"logo",fixed:!0,render:function(e,t,n){return(0,v.jsx)("span",{children:n+1})}},{title:"".concat(P),dataIndex:"name",key:"name",fixed:!0,align:"center",sorter:function(e,t){return e.name.localeCompare(t.name)},render:function(e,t){return(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(w.C,{className:"mr-2",size:"small",src:t.logo}),(0,v.jsx)("a",{href:"".concat(n.blockExplorerUrls[0],"/address/").concat(t.address),target:"_blank",rel:"noreferrer",children:t.name})]})}},{title:"".concat(_),dataIndex:"website",key:"website",width:"40%",align:"center",render:function(e,t,n){return I?(0,v.jsx)(b.ZP,{shape:"round",disabled:S===n,loading:S===n,onClick:function(){return B(n,t)},children:D}):(0,v.jsx)(b.ZP,{shape:"round",disabled:S===n,loading:S===n,onClick:function(){return T(n)},children:O})}},{title:"".concat(z),dataIndex:"address",key:"address",copyable:!0,ellipsis:!0,width:"50%"}]}),[B,T,S]),F=(0,x.useCallback)(o()(a()().mark((function e(){var r,s,o,i,d,f;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),r="",e.next=4,(0,l.zI)((0,h.request)("https://firestore.googleapis.com/v1/projects/token-library/databases/(default)/documents/v1/collection"));case 4:s=e.sent,o=c()(s,2),i=o[0],d=o[1],r=i?t.fields[n.chainIdDec].arrayValue.values:d.fields[n.chainIdDec].arrayValue.values,f=r.map((function(e,t){return{key:t,logo:e.mapValue.fields.imageUrl.stringValue,name:e.mapValue.fields.symbol.stringValue,website:"",link:"",twitter:"",telegram:"",github:"",discord:"",medium:"",address:e.mapValue.fields.l2Address.stringValue,params:{type:"ERC20",options:{address:e.mapValue.fields.l2Address.stringValue,symbol:e.mapValue.fields.symbol.stringValue,decimals:Number(e.mapValue.fields.decimals.integerValue),image:e.mapValue.fields.imageUrl.stringValue}}}})),V(u.N.setTokenList(f)),d&&localStorage.setItem("tokenDatazkSyncEra",JSON.stringify(d)),C(!1);case 13:case"end":return e.stop()}}),e)}))),[n,V,t]);return(0,x.useEffect)((function(){F()}),[F]),(0,v.jsxs)(d._z,{className:"tokenList",ghost:!0,children:[(0,v.jsx)(f.Z,{scroll:{x:!0},size:"small",columns:W,dataSource:e,defaultData:[],search:!1,options:!1,pagination:!1,loading:j}),p]})}},64119:function(e,t,n){n.d(t,{CE:function(){return g},D0:function(){return k},Hj:function(){return M},IU:function(){return v},Mn:function(){return L},pM:function(){return j},su:function(){return E},zI:function(){return w}});var r=n(27424),a=n.n(r),s=n(17061),o=n.n(s),i=n(18698),c=n.n(i),u=n(17156),l=n.n(u),d=n(85971),f=n(2453),p=n(9669),m=n.n(p);function h(){return d.Z.getState().global.nodeConfig.url}function g(e,t){var n=t||"",r=e,a=Number(r)<1;if("number"==typeof r&&(r=r.toString()),a){var s=/0\.(0{4,})/,o=/\d+\.0*\d{3}/.exec(r);if(r=o?o[0]:r,o=s.exec(r)){var i=o[1].length;return n+r.replace(s,"0.0{"+i+"}")}return n+r}return n+Number(r).toLocaleString()}function w(e){return b.apply(this,arguments)}function b(){return(b=l()(o()().mark((function e(t){var n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",[null,n]);case 7:if(e.prev=7,e.t0=e.catch(0),!(e.t0 instanceof Error)){e.next=14;break}return console.log(e.t0),e.abrupt("return",[e.t0.message,null]);case 14:if(console.log(e.t0),"object"!==c()(e.t0)){e.next=19;break}return e.abrupt("return",[JSON.stringify(e.t0),null]);case 19:return e.abrupt("return",[e.t0,null]);case 20:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function k(e){return x.apply(this,arguments)}function x(){return(x=l()(o()().mark((function e(t){var n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h(),e.next=3,w(m().post("".concat(n,"/v1/chain/get_account"),JSON.stringify(t)));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return y.apply(this,arguments)}function y(){return(y=l()(o()().mark((function e(t,n){var r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return r=e.sent,e.abrupt("return",r);case 7:if(e.prev=7,e.t0=e.catch(0),!(e.t0 instanceof Error)){e.next=15;break}throw console.log(e.t0),f.ZP.error({content:n||e.t0.message,duration:5}),e.t0;case 15:throw console.log(e.t0),"object"===c()(e.t0)?f.ZP.error({content:n||JSON.stringify(e.t0),duration:5}):f.ZP.error({content:n||e.t0,duration:5}),e.t0;case 18:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function M(e,t,n){return S.apply(this,arguments)}function S(){return(S=l()(o()().mark((function e(t,n,r){var a,s,i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null!=n?n:function(){},e.prev=1,e.next=4,t;case 4:return s=e.sent,e.abrupt("return",s);case 8:if(e.prev=8,e.t0=e.catch(1),!(e.t0 instanceof Error)){e.next=17;break}throw console.log(e.t0),a(),f.ZP.error({content:r||e.t0.message,duration:5}),e.t0;case 17:throw console.log(e.t0),"object"===c()(e.t0)?(i="",i=e.t0.hasOwnProperty("message")?e.t0.message:JSON.stringify(e.t0),f.ZP.error({content:r||i,duration:5})):f.ZP.error({content:r||e.t0,duration:5}),a(),e.t0;case 21:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function L(){var e=navigator.userAgent;return/mobile/i.test(e)}function E(e){return N.apply(this,arguments)}function N(){return(N=l()(o()().mark((function e(t){var n,r,s,i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,r=null,e.next=3,w(m().get("".concat(t,"/v1/chain/get_info"),{timeout:1e4}));case 3:return s=e.sent,i=a()(s,2),n=i[0],r=i[1],e.abrupt("return",[n,r]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){if("string"==typeof e)try{var t=JSON.parse(e);return!("object"!==c()(t)||!t)}catch(e){return!1}}},55420:function(){}}]);